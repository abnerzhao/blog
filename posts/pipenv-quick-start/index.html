<!DOCTYPE html>
<html lang="zh-CN" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="abnerzhao" />
	
	
	
	<title>Pipenv 快速上手 ｜ 知行
合一</title>
	
    
    
    <meta name="description" content="Pipenv 是 Python 官方推荐的的包管理工具，它集成了 virtualenv、pyenv 和 pip 三者的功能。 Pipenv 是 requests 的作者 Kenneth Reitz 大神开发了用于创建和管理 Python 虚拟环境的工具。
Pipenv 主要解决了以下问题：
 不用再单独使用 virtualenv 和 pip，而是将两者结合 不用再维护 requirements.txt，使用 Pipfile 和 Pipfile.lock 来代替 可以在开发环境使用多个 Python 版本 在安装的 pyenv 条件下，可以自动安装需要的 Python 版本 随时查看图形化的依赖关系 " />
    

    
    
    <meta name="keywords" content="Hugo, theme, zozo" />
    

	
    
    <link rel="shortcut icon" href="https://blog.abnerzhao.com/images/favicon.ico" />

    <link rel="stylesheet" type="text/css" media="screen" href="https://blog.abnerzhao.com/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://blog.abnerzhao.com/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://blog.abnerzhao.com/css/highlight.css" />

    
    
</head>

<body>
    <div class="main animate__animated animate__fadeInDown">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/posts/">Archive</a>
            </li>
            
            <li>
                <a href="/about/">About</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="https://blog.abnerzhao.com/">
                    <span>知行
合一</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title"></p>
            <div class="my_socials">
                
                
                <a href="https://www.douban.com/people/66794775/" title="douban" target="_blank"><i class="ri-douban-fill"></i></a>
                
                
                
                <a href="https://github.com/abnerzhao" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                <a href="https://blog.abnerzhao.com/index.xml" type="application/rss+xml" title="rss" target="_blank"><i
                        class="ri-rss-fill"></i></a>
            </div>
        </div>
    </div>
</div>
        <div class="content">
            <div class="post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/posts/pipenv-quick-start/'>Pipenv 快速上手</a></h2>
                        <span class="date">2019.01.18</span>
                    </div>
                    <div class="post_content markdown"><p><a href="https://pipenv.readthedocs.io/en/latest/">Pipenv</a> 是 Python 官方推荐的的包管理工具，它集成了 virtualenv、pyenv 和 pip 三者的功能。 Pipenv 是 requests 的作者 Kenneth Reitz 大神开发了用于创建和管理 Python 虚拟环境的工具。</p>
<p>Pipenv 主要解决了以下问题：</p>
<ul>
<li>不用再单独使用 virtualenv 和 pip，而是将两者结合</li>
<li>不用再维护 requirements.txt，使用 Pipfile 和 Pipfile.lock 来代替</li>
<li>可以在开发环境使用多个 Python 版本</li>
<li>在安装的 pyenv 条件下，可以自动安装需要的 Python 版本</li>
<li>随时查看图形化的依赖关系</li>
</ul>
<h3 id="入门">入门</h3>
<h4 id="安装">安装</h4>
<p>和普通的第三方包安装相同，直接使用 pip 命令进行安装。</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pip install pipenv
</code></pre></div><h4 id="创建虚拟环境">创建虚拟环境</h4>
<p>虚拟环境是每个 Python 项目的独立执行环境。</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ cd mytest
$ pipenv  install
Creating a virtualenv for this project...
Pipfile: /root/deploys/mytest/Pipfile
Using /usr/bin/python (2.7.15) to create virtualenv...
⠋ Creating virtual environment...Already using interpreter /usr/bin/python
New python executable in /root/.local/share/virtualenvs/mytest-2D3nqn7b/bin/python
Installing setuptools, pip, wheel...
done.

✔ Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/mytest-2D3nqn7b
Creating a Pipfile for this project...
Pipfile.lock not found, creating...
Locking [dev-packages] dependencies...
Locking [packages] dependencies...
Updated Pipfile.lock (dfae9f)!
Installing dependencies from Pipfile.lock (dfae9f)...
  🐍   ▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉ 0/0 — 00:00:00
To activate this project&#39;s virtualenv, run pipenv shell.
Alternatively, run a command inside the virtualenv with pipenv run.
$ ls
Pipfile  Pipfile.lock
</code></pre></div><p>我们在一个新项目的目录中创建了虚拟环境，默认使用的是系统的 Python2 版本，当然也可以指定 Python 版本。Pipenv 也自动为我们选择虚拟环境的存储位置，创建完成之后目录下出现了 <code>Pipfile</code> 和 <code>Pipfile.lock</code> 两个文件。</p>
<h4 id="激活和退出虚拟环境">激活和退出虚拟环境</h4>
<p>激活虚拟环境</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pipenv shell
</code></pre></div><p>退出虚拟环境</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ exit //或者 ctrl+d
</code></pre></div><h4 id="安装第三方包">安装第三方包</h4>
<p>既然 Pipenv 能够替代 pip，那么我们就直接使用 Pipenv 命令来安装软件包</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pipenv install requests
Installing requests...
Adding requests to Pipfile&#39;s [packages]...
✔ Installation Succeeded
Pipfile.lock (ab273c) out of date, updating to (dfae9f)...
Locking [dev-packages] dependencies...
Locking [packages] dependencies...
✔ Success!
Updated Pipfile.lock (ab273c)!
Installing dependencies from Pipfile.lock (ab273c)...
  🐍   ▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉▉ 5/5 — 00:00:02
To activate this project&#39;s virtualenv, run pipenv shell.
Alternatively, run a command inside the virtualenv with pipenv run.
</code></pre></div><p>使用 Pipenv 安装第三方包不需要激活虚拟环境，会直接下载到虚拟环境中。如果使用 pip 安装，我们需要先激活项目的虚拟环境才能保证软件包的正确安装。安装完包之后，Pipfile 和 Pipfile.lock 两个文件会被更新。</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ cat Pipfile
[[source]]
name = &#34;pypi&#34;
url = &#34;https://pypi.org/simple&#34;
verify_ssl = true

[dev-packages]

[packages]
requests = &#34;*&#34;

[requires]
python_version = &#34;2.7&#34;
$ cat Pipfile.lock
{
    &#34;_meta&#34;: {
        &#34;hash&#34;: {
            &#34;sha256&#34;: &#34;9838c8bf3aa442453b393e09e534ba7e1666aab4da1b9b408ecdf3ae58ab273c&#34;
        },
        &#34;pipfile-spec&#34;: 6,
        &#34;requires&#34;: {
            &#34;python_version&#34;: &#34;2.7&#34;
        },
        &#34;sources&#34;: [
            {
                &#34;name&#34;: &#34;pypi&#34;,
                &#34;url&#34;: &#34;https://pypi.org/simple&#34;,
                &#34;verify_ssl&#34;: true
            }
        ]
    },
    &#34;default&#34;: {
        &#34;certifi&#34;: {
            &#34;hashes&#34;: [
                &#34;sha256:47f9c83ef4c0c621eaef743f133f09fa8a74a9b75f037e8624f83bd1b6626cb7&#34;,
                &#34;sha256:993f830721089fef441cdfeb4b2c8c9df86f0c63239f06bd025a76a7daddb033&#34;
            ],
            &#34;version&#34;: &#34;==2018.11.29&#34;
        },
        &#34;chardet&#34;: {
            &#34;hashes&#34;: [
                &#34;sha256:84ab92ed1c4d4f16916e05906b6b75a6c0fb5db821cc65e70cbd64a3e2a5eaae&#34;,
                &#34;sha256:fc323ffcaeaed0e0a02bf4d117757b98aed530d9ed4531e3e15460124c106691&#34;
            ],
            &#34;version&#34;: &#34;==3.0.4&#34;
        },
        &#34;idna&#34;: {
            &#34;hashes&#34;: [
                &#34;sha256:c357b3f628cf53ae2c4c05627ecc484553142ca23264e593d327bcde5e9c3407&#34;,
                &#34;sha256:ea8b7f6188e6fa117537c3df7da9fc686d485087abf6ac197f9c46432f7e4a3c&#34;
            ],
            &#34;version&#34;: &#34;==2.8&#34;
        },
        &#34;requests&#34;: {
            &#34;hashes&#34;: [
                &#34;sha256:502a824f31acdacb3a35b6690b5fbf0bc41d63a24a45c4004352b0242707598e&#34;,
                &#34;sha256:7bf2a778576d825600030a110f3c0e3e8edc51dfaafe1c146e39a2027784957b&#34;
            ],
            &#34;index&#34;: &#34;pypi&#34;,
            &#34;version&#34;: &#34;==2.21.0&#34;
        },
        &#34;urllib3&#34;: {
            &#34;hashes&#34;: [
                &#34;sha256:61bf29cada3fc2fbefad4fdf059ea4bd1b4a86d2b6d15e1c7c0b582b9752fe39&#34;,
                &#34;sha256:de9529817c93f27c8ccbfead6985011db27bd0ddfcdb2d86f3f663385c6a9c22&#34;
            ],
            &#34;version&#34;: &#34;==1.24.1&#34;
        }
    },
    &#34;develop&#34;: {}
}
</code></pre></div><p>Pipfile 文件中记录了如下信息：</p>
<ul>
<li>pip 仓库地址</li>
<li>需要下载哪些包， * 表示始终下载最新版本，dev-packages 表示专用于开发阶段使用的包</li>
<li>Python 版本</li>
</ul>
<p>Pipfile.lock 文件中记录了包的详细信息：</p>
<ul>
<li>hash 值</li>
<li>依赖关系</li>
</ul>
<p>有了 Pipfile 文件当我们把项目部署到生产环境时，直接 pipenv install 就自动创建虚拟环境并把包安装好。</p>
<h3 id="常用命令">常用命令</h3>
<h4 id="pipenv-选项">pipenv 选项</h4>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">Options:
  --where             Output project home information. 
  --venv              Output virtualenv information.
  --py                Output Python interpreter information. 
  --envs              Output Environment Variable options.
  --rm                Remove the virtualenv.
  --bare              Minimal output.
  --completion        Output completion (to be eval&#39;d).
  --man               Display manpage.
  --support           Output diagnostic information for use in GitHub issues.
  --site-packages     Enable site-packages for the virtualenv.  [env var:
                      PIPENV_SITE_PACKAGES]
  --python TEXT       Specify which version of Python virtualenv should use.
  --three / --two     Use Python 3/2 when creating virtualenv.
  --clear             Clears caches (pipenv, pip, and pip-tools).  [env var:
                      PIPENV_CLEAR]
  -v, --verbose       Verbose mode.
  --pypi-mirror TEXT  Specify a PyPI mirror.
  --version           Show the version and exit.
  -h, --help          Show this message and exit.
</code></pre></div><h4 id="pipenv-命令参数">pipenv 命令参数</h4>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">Commands</span><span class="p">:</span>
  <span class="nx">check</span>      <span class="nx">Checks</span> <span class="k">for</span> <span class="nx">security</span> <span class="nx">vulnerabilities</span> <span class="nx">and</span> <span class="nx">against</span> <span class="nx">PEP</span> <span class="mi">508</span> <span class="nx">markers</span>
             <span class="nx">provided</span> <span class="nx">in</span> <span class="nx">Pipfile</span><span class="p">.</span>
  <span class="nx">clean</span>      <span class="nx">Uninstalls</span> <span class="nx">all</span> <span class="nx">packages</span> <span class="nx">not</span> <span class="nx">specified</span> <span class="nx">in</span> <span class="nx">Pipfile</span><span class="p">.</span><span class="nx">lock</span><span class="p">.</span>
  <span class="nx">graph</span>      <span class="nx">Displays</span> <span class="nx">currently</span><span class="o">-</span><span class="nx">installed</span> <span class="nx">dependency</span> <span class="nx">graph</span> <span class="nx">information</span><span class="p">.</span>
  <span class="nx">install</span>    <span class="nx">Installs</span> <span class="nx">provided</span> <span class="nx">packages</span> <span class="nx">and</span> <span class="nx">adds</span> <span class="nx">them</span> <span class="nx">to</span> <span class="nx">Pipfile</span><span class="p">,</span> <span class="nf">or</span> <span class="p">(</span><span class="k">if</span> <span class="nx">no</span>
             <span class="nx">packages</span> <span class="nx">are</span> <span class="nx">given</span><span class="p">),</span> <span class="nx">installs</span> <span class="nx">all</span> <span class="nx">packages</span> <span class="nx">from</span> <span class="nx">Pipfile</span><span class="p">.</span>
  <span class="nx">lock</span>       <span class="nx">Generates</span> <span class="nx">Pipfile</span><span class="p">.</span><span class="nx">lock</span><span class="p">.</span>
  <span class="nx">open</span>       <span class="nx">View</span> <span class="nx">a</span> <span class="nx">given</span> <span class="nx">module</span> <span class="nx">in</span> <span class="nx">your</span> <span class="nx">editor</span><span class="p">.</span>
  <span class="nx">run</span>        <span class="nx">Spawns</span> <span class="nx">a</span> <span class="nx">command</span> <span class="nx">installed</span> <span class="nx">into</span> <span class="nx">the</span> <span class="nx">virtualenv</span><span class="p">.</span>
  <span class="nx">shell</span>      <span class="nx">Spawns</span> <span class="nx">a</span> <span class="nx">shell</span> <span class="nx">within</span> <span class="nx">the</span> <span class="nx">virtualenv</span><span class="p">.</span>
  <span class="nx">sync</span>       <span class="nx">Installs</span> <span class="nx">all</span> <span class="nx">packages</span> <span class="nx">specified</span> <span class="nx">in</span> <span class="nx">Pipfile</span><span class="p">.</span><span class="nx">lock</span><span class="p">.</span>
  <span class="nx">uninstall</span>  <span class="nx">Un</span><span class="o">-</span><span class="nx">installs</span> <span class="nx">a</span> <span class="nx">provided</span> <span class="kn">package</span> <span class="nx">and</span> <span class="nx">removes</span> <span class="nx">it</span> <span class="nx">from</span> <span class="nx">Pipfile</span><span class="p">.</span>
  <span class="nx">update</span>     <span class="nx">Runs</span> <span class="nx">lock</span><span class="p">,</span> <span class="nx">then</span> <span class="nx">sync</span><span class="p">.</span>
</code></pre></div><h4 id="pipenv-常用命令示例">pipenv 常用命令示例</h4>
<p>创建项目虚拟环境指定 Python 版本</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pipenv --python 3.7
$ pipenv --python 2.7.15
</code></pre></div><p>不必显式激活虚拟环境，用虚拟机环境执行命令</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pipenv run python -m http.server
$ pipenv run python test.py
</code></pre></div><p>软件包只安装到开发环境</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pipenv install pytest --dev
</code></pre></div><p>删除虚拟环境，该操作会把虚拟环境目录和里面所有的依赖包删除，但是 Pipfile 和 Pipfile.lock 文件会保留</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pipenv --rm
</code></pre></div><p>删除软件包</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pipenv uninstall requests
</code></pre></div><p>生成 requirements.txt 格式</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pipenv lock -r
$ pipenv lock -r -d //生成 dev-packages 的 requirements.txt
</code></pre></div><p>导入 requirements.txt</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pipenv install -r requirements.txt
</code></pre></div><p>显示依赖树</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pipenv graph
</code></pre></div><p>安全检查</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">$ pipenv check
</code></pre></div></div>
                    <div class="post_footer">
                        
                    </div>
                </div>
                
                
                <div class="doc_comments"></div>
                
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <div class="powered_by">
        <a href="https://blog.abnerzhao.com">Designed by Abnerzhao,</a>
        <a href="http://www.gohugo.io/">Proudly published with Hugo</a>
    </div>

    <div class="footer_slogan">
        <span></span>
    </div>
</footer>

    <script src="https://blog.abnerzhao.com/js/jquery-3.5.1.min.js"></script>
<link href="https://blog.abnerzhao.com/css/fancybox.min.css" rel="stylesheet">
<script src="https://blog.abnerzhao.com/js/fancybox.min.js"></script>
<script src="https://blog.abnerzhao.com/js/zozo.js"></script>


<script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>



</body>

</html>